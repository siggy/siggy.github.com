<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="keywords" content="Siggy's Ajax House, Ajax" />
    <title>Siggy's Ajax House</title>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27834075-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body>

    <script language="javascript" type="text/javascript">

      /* Create a new XMLHttpRequest object to talk to the Web server */
      var xmlHttp = false;
      /*@cc_on @*/
      /*@if (@_jscript_version >= 5)
      try
      {
        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
      }
      catch (e)
      {
        try
        {
          xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (e2)
        {
          xmlHttp = false;
        }
      }
      @end @*/

      if (!xmlHttp && typeof XMLHttpRequest != 'undefined')
      {
        xmlHttp = new XMLHttpRequest();
      }

      // test for xmlHttp existence
      if (!xmlHttp)
      {
        alert("Error initializing XMLHttpRequest!");
      }

      function callServer()
      {
        // Get the city and state from the web form
        var city = document.getElementById("city").value;
        var state = document.getElementById("state").value;

        // Only go on if there are values for both fields
        if ( (city == null) || (city == "") )
        {
//          return;
        }

        if ( (state == null) || (state == "") )
        {
//          return;
        }

        // Build the URL to connect to
        var url = "/scripts/getZipCode.php?city=" + escape(city) + "&state=" + escape(state);
        //var url = "/cgi-bin/test7.cgi?sig";

        // Open a connection to the server
        xmlHttp.open("GET", url, true);

        // Setup a function for the server to run when it's done
        xmlHttp.onreadystatechange = updatePage;

        // Send the request
        xmlHttp.send(null);
      }

      function updatePage()
      {
        if (xmlHttp.readyState == 4)
        {
          var response = xmlHttp.responseText;
          document.getElementById("zipCode").value = response;
        }
      }

    </script>

    <p>
      City: <input type="text" name="city" id="city" size="25" onChange="callServer();" />
    </p>

    <p>
      State: <input type="text" name="state" id="state" size="25" onKeyUp="callServer();" />
    </p>

    <p>
      Zip Code: <input type="text" name="zipCode" id="zipCode" size="100" />
    </p>

    <p>
      your comments:<BR>
      <TEXTAREA name="comments" COLS=40 ROWS=6></TEXTAREA>
    </p>

    <p>
      <a href="index.html" onclick="callServer();return false;">Try the example.</a>
    </p>


    <p>
      <input type="button" onclick="callServer();return false;" name="Click me" />
    </p>

  </body>

</html>

